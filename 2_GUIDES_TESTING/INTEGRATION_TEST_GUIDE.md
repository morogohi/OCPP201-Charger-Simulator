# ğŸ“‹ OCPP 2.0.1 C# ì‹œë®¬ë ˆì´í„° í†µí•© í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

> **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024ë…„ 1ì›” 21ì¼  
> **ìƒíƒœ**: ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œ âœ…  
> **ëŒ€ìƒ**: Python OCPP 2.0.1 ì„œë²„ì™€ C# ì‹œë®¬ë ˆì´í„°ì˜ ì™„ì „í•œ ì—°ë™ í…ŒìŠ¤íŠ¸

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ëª©í‘œ

| í•­ëª© | ëª©í‘œ | ê²€ì¦ ë°©ë²• |
|------|------|---------|
| **í”„ë¡œí† ì½œ í˜¸í™˜ì„±** | OCPP 2.0.1 ë©”ì‹œì§€ ì™„ë²½ í˜¸í™˜ | WebSocket ë©”ì‹œì§€ ìŠ¤ë‹ˆí•‘ |
| **ì–‘ë°©í–¥ í†µì‹ ** | ì¶©ì „ê¸°â†’ì„œë²„, ì„œë²„â†’ì¶©ì „ê¸° ë©”ì‹œì§€ | ë¡œê·¸ íŒŒì¼ ë¶„ì„ |
| **ë°ì´í„° ë¬´ê²°ì„±** | ì—ë„ˆì§€, ë¹„ìš©, ì‹œê°„ ì •í™•í•˜ê²Œ ê¸°ë¡ | SQL ì¿¼ë¦¬ ê²€ì¦ |
| **ë‹¤ì¤‘ ë™ì‹œ ì—°ê²°** | 5ê°œ ì´ìƒ ì¶©ì „ê¸° ë™ì‹œ ìš´ì˜ | í¬íŠ¸ ëª¨ë‹ˆí„°ë§ |
| **ì˜¤ë¥˜ ë³µêµ¬** | ì¬ì—°ê²°, ì§€ìˆ˜ ë°±ì˜¤í”„ | ë„¤íŠ¸ì›Œí¬ ëŠê¹€ ì‹œë®¬ë ˆì´ì…˜ |

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (Quick Start)

### 1ï¸âƒ£ í™˜ê²½ í™•ì¸ (5ë¶„)

```powershell
# PowerShell ê´€ë¦¬ì ëª¨ë“œì—ì„œ ì‹¤í–‰

# Python ì„¤ì¹˜ í™•ì¸
python --version
# ì¶œë ¥: Python 3.8+

# .NET SDK í™•ì¸
dotnet --version
# ì¶œë ¥: 6.0+ ì´ìƒ

# PostgreSQL ì„œë²„ í™•ì¸
psql -U charger_user -d charger_db -c "SELECT COUNT(*) FROM charger_info;"
# ì¶œë ¥: 1 í–‰ (í•„í„°ë§ëœ ê²°ê³¼) : 34

# Python íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install websockets psycopg2-binary tabulate
```

### 2ï¸âƒ£ Python ì„œë²„ ì‹œì‘ (10ì´ˆ)

```powershell
cd C:\Project\OCPP201(P2M)
python ocpp_server.py
# ì¶œë ¥: ğŸŒ OCPP 2.0.1 ì„œë²„ ì‹œì‘: ws://localhost:9000
```

### 3ï¸âƒ£ C# ì‹œë®¬ë ˆì´í„° ì‹¤í–‰ (ì„ íƒ)

```powershell
# ì˜µì…˜ A: ë°°ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
run_tests.bat
# ì˜µì…˜ B: Python í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©
python test_csharp_integration.py

# ì˜µì…˜ C: C# ì§ì ‘ ì‹¤í–‰
dotnet run --project OCPP201ChargerSimulator.csproj
```

### 4ï¸âƒ£ ê²°ê³¼ ê²€ì¦ (30ì´ˆ)

```powershell
python verify_test_results.py
```

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„¸

### ğŸ“Œ ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ ì—°ê²° & BootNotification

**ëª©ì **: ì¶©ì „ê¸°-ì„œë²„ ê¸°ë³¸ ì—°ê²° í™•ì¸

**ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 5ì´ˆ

**ì‹¤í–‰ ë‹¨ê³„**:

```
1. ì¶©ì „ê¸° â†’ ì„œë²„: WebSocket ì—°ê²° (ws://localhost:9000)
   â”‚
   â”œâ”€â†’ 2. ì¶©ì „ê¸° â†’ ì„œë²„: BootNotification
   â”‚     {
   â”‚       "chargingStation": {
   â”‚         "model": "Simulator",
   â”‚         "vendorName": "EMART",
   â”‚         "serialNumber": "SN-emart_jeju_01-001"
   â”‚       },
   â”‚       "reason": "PowerUp"
   â”‚     }
   â”‚
   â””â”€â†’ 3. ì„œë²„ â†’ ì¶©ì „ê¸°: CALLRESULT (BootNotification)
         {
           "status": "Accepted",
           "interval": 30
         }
   
4. ì¶©ì „ê¸°: 30ì´ˆ ì£¼ê¸°ë¡œ Heartbeat ì‹œì‘
   â”‚
   â””â”€â†’ ğŸ’“ Heartbeat ë§¤ 30ì´ˆë§ˆë‹¤ ì „ì†¡
```

**ì˜ˆìƒ ê²°ê³¼**:

```
âœ… [emart_jeju_01] ì„œë²„ ì—°ê²° ì„±ê³µ
âœ… [emart_jeju_01] BootNotification ì „ì†¡
âœ… [emart_jeju_01] CALLRESULT ìˆ˜ì‹ 
ğŸ’“ [emart_jeju_01] Heartbeat ì‹œì‘ (30ì´ˆ ì£¼ê¸°)
```

**ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦**:

```sql
-- ì ‘ì† ë¡œê·¸ í™•ì¸
SELECT charger_id, status, logged_at 
FROM charger_connection_log
WHERE logged_at > NOW() - INTERVAL '5 minutes'
ORDER BY logged_at DESC;

-- ê¸°ëŒ€ ê²°ê³¼:
-- emart_jeju_01 | connected | 2024-01-21 15:30:45
```

---

### ğŸ“Œ ì‹œë‚˜ë¦¬ì˜¤ 2: ì¶©ì „ ì„¸ì…˜ (Started â†’ Updated â†’ Ended)

**ëª©ì **: ì™„ì „í•œ ì¶©ì „ ì£¼ê¸° ê²€ì¦

**ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 30ì´ˆ

**ë©”ì‹œì§€ íë¦„**:

```
1. ì‚¬ìš©ì ì¹´ë“œ ì¸ì‹
   â”‚
   â”œâ”€â†’ 2. ì¶©ì „ê¸° â†’ ì„œë²„: TransactionEvent (Started)
   â”‚     {
   â”‚       "eventType": "Started",
   â”‚       "transactionData": {
   â”‚         "transactionId": "TX-20240121-001",
   â”‚         "chargingState": "Charging",
   â”‚         "chargingPeriods": [{
   â”‚           "dimensions": [
   â”‚             {"name": "Energy.Active.Import.Register", "value": 0},
   â”‚             {"name": "Power.Active.Import", "value": 100}
   â”‚           ]
   â”‚         }]
   â”‚       }
   â”‚     }
   â”‚
   â”œâ”€â†’ 3. (ì¶©ì „ ì§„í–‰ ì¤‘ 5ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸)
   â”‚     ì¶©ì „ê¸° â†’ ì„œë²„: TransactionEvent (Updated)
   â”‚     â”œâ”€ ì—ë„ˆì§€: 0 â†’ 0.14kWh
   â”‚     â”œâ”€ ì „ë ¥: 100kW
   â”‚     â””â”€ ë°˜ë³µ: ë§¤ 5ì´ˆ
   â”‚
   â””â”€â†’ 4. ì¶©ì „ ì™„ë£Œ ì‹ í˜¸
         ì¶©ì „ê¸° â†’ ì„œë²„: TransactionEvent (Ended)
         {
           "eventType": "Ended",
           "transactionData": {
             "transactionId": "TX-20240121-001",
             "chargingState": "Finishing",
             "totalCost": 3000,
             "stoppedReason": "Local"
           }
         }
```

**ì„±ëŠ¥ ê¸°ì¤€**:

| í•­ëª© | ê¸°ëŒ€ê°’ | í—ˆìš©ë²”ìœ„ |
|------|-------|---------|
| ì—ë„ˆì§€ ëˆ„ì  | 1.67 kWh | Â±0.2 kWh |
| 30ì´ˆ ì‹¤í–‰ ì‹œ | 30ì´ˆ ì •í™• | Â±1ì´ˆ |
| ìš”ê¸ˆ ê³„ì‚° | ì—ë„ˆì§€ Ã— 150ì›/kWh | Â±5% |

**ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦**:

```sql
-- ê±°ë˜ ë‚´ì—­ í™•ì¸
SELECT 
    charger_id,
    transaction_id,
    energy_consumed,
    cost,
    duration_seconds,
    start_time,
    end_time
FROM charger_usage_log
WHERE start_time > NOW() - INTERVAL '5 minutes'
  AND charger_id = 'emart_jeju_01'
ORDER BY start_time DESC;

-- ê¸°ëŒ€ ê²°ê³¼:
-- emart_jeju_01 | TX-20240121-001 | 1.67 | 250.5 | 30 | 2024-01-21 15:31:00 | 2024-01-21 15:31:30
```

**ë¹„ìš© ê³„ì‚° ê²€ì¦**:

```sql
-- ì—ë„ˆì§€ ê¸°ë°˜ ë¹„ìš© ì¬ê³„ì‚°
SELECT 
    energy_consumed,
    energy_consumed * 150 as expected_cost,
    cost as actual_cost,
    ABS((energy_consumed * 150) - cost) as difference
FROM charger_usage_log
WHERE start_time > NOW() - INTERVAL '5 minutes'
  AND transaction_id = 'TX-20240121-001';

-- ê¸°ëŒ€ ê²°ê³¼: difference < 10ì›
```

---

### ğŸ“Œ ì‹œë‚˜ë¦¬ì˜¤ 3: ì„œë²„ ì œì–´ ëª…ë ¹

**ëª©ì **: ì–‘ë°©í–¥ OCPP í†µì‹  ê²€ì¦

**ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 20ì´ˆ

**ì‹œë‚˜ë¦¬ì˜¤**:

```
1. ì„œë²„ â†’ ì¶©ì „ê¸°: RequestStartTransaction
   â”œâ”€ CALL ë©”ì‹œì§€ í˜•ì‹: [2, "MSG-ID-123", "RequestStartTransaction", {...}]
   â””â”€ idToken: "CARD-ABC123"

2. ì¶©ì „ê¸° ì‘ë‹µ: CALLRESULT
   â”œâ”€ ìƒíƒœ: "Accepted"
   â””â”€ TransactionId ìƒì„±

3. ìë™ ì¶©ì „ ì‹œì‘ (ìœ„ì˜ ì‹œë‚˜ë¦¬ì˜¤ 2ì™€ ë™ì¼)
   â”œâ”€ TransactionEvent (Started)
   â”œâ”€ TransactionEvent (Updated) Ã—5
   â””â”€ 10ì´ˆ í›„ ìë™ ì¤‘ì§€

4. ì„œë²„ â†’ ì¶©ì „ê¸°: RequestStopTransaction
   â”œâ”€ transactionId í¬í•¨
   â””â”€ ì¶©ì „ ì¦‰ì‹œ ì¤‘ë‹¨

5. ì¶©ì „ê¸° ì‘ë‹µ
   â”œâ”€ TransactionEvent (Ended)
   â””â”€ ìµœì¢… ì—ë„ˆì§€/ë¹„ìš© ì „ì†¡
```

**REST API í…ŒìŠ¤íŠ¸**:

```bash
# 1. ì¶©ì „ ì‹œì‘
curl -X POST http://localhost:8080/chargers/emart_jeju_01/start \
  -H "Content-Type: application/json" \
  -d '{"idToken": "CARD-XYZ789"}'
# ì‘ë‹µ: {"status": "ok", "transactionId": "TX-20240121-002"}

# 2. ìƒíƒœ í™•ì¸ (5ì´ˆ ëŒ€ê¸°)
curl -X GET http://localhost:8080/chargers/emart_jeju_01
# ì‘ë‹µ: {"status": "Charging", "power": 100, "energy": 0.14}

# 3. ì¶©ì „ ì¤‘ì§€
curl -X POST http://localhost:8080/chargers/emart_jeju_01/stop \
  -d '{"transactionId": "TX-20240121-002"}'
# ì‘ë‹µ: {"status": "ok", "energy": 0.56, "cost": 84}

# 4. ì¶œë ¥ ì œí•œ
curl -X PATCH http://localhost:8080/chargers/emart_jeju_01/power \
  -d '{"maxPowerKw": 50}'
# ì‘ë‹µ: {"status": "ok", "maxPower": 50}
```

**ê²€ì¦**:

```sql
-- RequestStart/Stop ë©”ì‹œì§€ ë¡œê·¸
SELECT action, message_type, status, logged_at
FROM ocpp_message_log
WHERE charger_id = 'emart_jeju_01'
  AND logged_at > NOW() - INTERVAL '20 minutes'
  AND action IN ('RequestStartTransaction', 'RequestStopTransaction')
ORDER BY logged_at;

-- ê¸°ëŒ€ ê²°ê³¼:
-- RequestStartTransaction  | CALL      | sent   | 2024-01-21 15:32:10
-- [CALLRESULT from charger]
-- RequestStopTransaction   | CALL      | sent   | 2024-01-21 15:32:30
-- [CALLRESULT from charger]
```

---

### ğŸ“Œ ì‹œë‚˜ë¦¬ì˜¤ 4: ë‹¤ì¤‘ ì¶©ì „ê¸° ë™ì‹œ ìš´ì˜

**ëª©ì **: ë™ì‹œì„± ë° í™•ì¥ì„± ê²€ì¦

**ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 45ì´ˆ

**êµ¬ì„±**:

```
ë™ì‹œ ì—°ê²° ì¶©ì „ê¸°:
â”œâ”€ emart_jeju_01 (100kW)      â”€â”€â”€â”€â”
â”œâ”€ emart_jeju_02 (100kW)      â”€â”€â”€â”€â”¤
â”œâ”€ emart_jeju_03 (100kW)      â”€â”€â”€â”€â”¼â”€â†’ ì´ 350kW ë™ì‹œ ì „ë ¥ ì†Œë¹„
â”œâ”€ emart_shinjeju_01 (50kW)   â”€â”€â”€â”€â”¤
â””â”€ emart_shinjeju_02 (50kW)   â”€â”€â”€â”€â”˜
```

**ë³‘ë ¬ ë©”ì‹œì§€ íë¦„**:

```
ì‹œê°„ T0:   ëª¨ë“  ì¶©ì „ê¸° ë™ì‹œ BootNotification
           â”œâ”€ MSG-001-emart_jeju_01
           â”œâ”€ MSG-002-emart_jeju_02
           â”œâ”€ MSG-003-emart_jeju_03
           â”œâ”€ MSG-004-emart_shinjeju_01
           â””â”€ MSG-005-emart_shinjeju_02

ì‹œê°„ T5:   ëª¨ë“  ì¶©ì „ê¸° ë™ì‹œ ì¶©ì „ ì‹œì‘
           â”œâ”€ TransactionEvent (Started) Ã—5
           â””â”€ ê°ê° ë…ë¦½ì ì¸ Transaction ID

ì‹œê°„ T10-40: ë³‘ë ¬ ì—ë„ˆì§€ ëˆ„ì 
           â”œâ”€ emart_jeju_01: 0 â†’ 0.83 kWh
           â”œâ”€ emart_jeju_02: 0 â†’ 0.83 kWh
           â”œâ”€ emart_jeju_03: 0 â†’ 0.83 kWh
           â”œâ”€ emart_shinjeju_01: 0 â†’ 0.42 kWh
           â””â”€ emart_shinjeju_02: 0 â†’ 0.42 kWh

ì‹œê°„ T40:  ëª¨ë“  ì¶©ì „ê¸° ë™ì‹œ ì¢…ë£Œ
           â””â”€ TransactionEvent (Ended) Ã—5
```

**ì„±ëŠ¥ ì§€í‘œ**:

| ì§€í‘œ | ëª©í‘œ | ê²€ì¦ |
|------|------|------|
| í‰ê·  ì‘ë‹µì‹œê°„ | <100ms | TCP ë¡œê·¸ ë¶„ì„ |
| ë©”ì‹œì§€ ì†ì‹¤ë¥  | 0% | DB ê±°ë˜ ìˆ˜ í™•ì¸ |
| ë™ì‹œ WebSocket | 5ê°œ | netstat ëª¨ë‹ˆí„°ë§ |
| í”¼í¬ ì „ë ¥ | 350kW | DB ì „ë ¥ í•©ê³„ |

**ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦**:

```sql
-- ì‹œê°„ëŒ€ë³„ ì¶©ì „ê¸° í™œì„± ìƒíƒœ
SELECT 
    DATE_TRUNC('minute', logged_at) as minute,
    COUNT(DISTINCT charger_id) as active_chargers,
    SUM(power) as total_power_kw
FROM charger_status_log
WHERE logged_at > NOW() - INTERVAL '45 seconds'
GROUP BY DATE_TRUNC('minute', logged_at)
ORDER BY minute;

-- ê¸°ëŒ€ ê²°ê³¼:
-- 15:33:00 | 5 | 350
-- 15:33:10 | 5 | 350
-- 15:33:20 | 5 | 350

-- ê±°ë˜ë³„ ì—ë„ˆì§€ í™•ì¸
SELECT 
    charger_id,
    COUNT(*) as transaction_count,
    SUM(energy_consumed) as total_kwh,
    AVG(energy_consumed) as avg_kwh
FROM charger_usage_log
WHERE start_time > NOW() - INTERVAL '1 hour'
  AND charger_id LIKE 'emart_%'
GROUP BY charger_id
ORDER BY charger_id;

-- ê¸°ëŒ€ ê²°ê³¼:
-- emart_jeju_01       | N | 0.8-1.0 | ...
-- emart_jeju_02       | N | 0.8-1.0 | ...
-- emart_jeju_03       | N | 0.8-1.0 | ...
-- emart_shinjeju_01   | N | 0.4-0.5 | ...
-- emart_shinjeju_02   | N | 0.4-0.5 | ...
```

---

### ğŸ“Œ ì‹œë‚˜ë¦¬ì˜¤ 5: ì˜¤ë¥˜ ë³µêµ¬ & ì¬ì—°ê²°

**ëª©ì **: ë„¤íŠ¸ì›Œí¬ ì¥ì•  ëŒ€ì‘ ê²€ì¦

**ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 30ì´ˆ

**ì‹¤íŒ¨ ì‹œë®¬ë ˆì´ì…˜**:

```bash
# ì‹œë‚˜ë¦¬ì˜¤ 5-1: ì„œë²„ ì¤‘ë‹¨ í›„ ì¬ì‹œì‘
1. ì¶©ì „ê¸° ì—°ê²° ì¤‘ â†’ ì„œë²„ ì¢…ë£Œ
   ì¶©ì „ê¸°: âŒ WebSocket ì—°ê²° ëŠê¹€
           â””â”€â†’ ì§€ìˆ˜ ë°±ì˜¤í”„ ì¬ì—°ê²° ì‹œì‘
               â€¢ 1ì´ˆ ëŒ€ê¸°
               â€¢ 2ì´ˆ ëŒ€ê¸°
               â€¢ 4ì´ˆ ëŒ€ê¸°
               â€¢ 8ì´ˆ ëŒ€ê¸°

2. Python ì„œë²„ ì¬ì‹œì‘ (10ì´ˆ í›„)
   ì¶©ì „ê¸°: ìë™ ì¬ì—°ê²° ì‹œë„
           â””â”€â†’ âœ… ì—°ê²° ì„±ê³µ

3. ìë™ BootNotification ì¬ì „ì†¡
   ì¶©ì „ê¸°: heartbeat_interval = 30ì´ˆë¡œ ì¬ì„¤ì •
           â””â”€â†’ ì •ìƒ ìš´ì˜ ì¬ê°œ
```

**êµ¬í˜„ ì½”ë“œ (C# ì‹œë®¬ë ˆì´í„°)**:

```csharp
private async Task ReconnectWithExponentialBackoff()
{
    int retryCount = 0;
    int maxRetries = 5;
    
    while (retryCount < maxRetries && !_isConnected)
    {
        try
        {
            int delayMs = (int)Math.Pow(2, retryCount) * 1000; // 1s, 2s, 4s, 8s, 16s
            Console.WriteLine($"[{ChargerId}] {delayMs/1000}ì´ˆ í›„ ì¬ì—°ê²° ì‹œë„...");
            
            await Task.Delay(delayMs);
            await ConnectAsync();
            
            if (_isConnected)
            {
                Console.WriteLine($"âœ… [{ChargerId}] ì¬ì—°ê²° ì„±ê³µ");
                await SendBootNotificationAsync();
                break;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"âŒ [{ChargerId}] ì¬ì—°ê²° ì‹¤íŒ¨: {ex.Message}");
            retryCount++;
        }
    }
}
```

**ë¡œê·¸ ê²€ì¦**:

```
[emart_jeju_01] WebSocket ì—°ê²° ëŠê¹€
âš ï¸  [emart_jeju_01] 1ì´ˆ í›„ ì¬ì—°ê²° ì‹œë„...
âŒ [emart_jeju_01] ì¬ì—°ê²° ì‹¤íŒ¨: Connection refused
âš ï¸  [emart_jeju_01] 2ì´ˆ í›„ ì¬ì—°ê²° ì‹œë„...
âŒ [emart_jeju_01] ì¬ì—°ê²° ì‹¤íŒ¨: Connection refused
âš ï¸  [emart_jeju_01] 4ì´ˆ í›„ ì¬ì—°ê²° ì‹œë„...
âŒ [emart_jeju_01] ì¬ì—°ê²° ì‹¤íŒ¨: Connection refused
âš ï¸  [emart_jeju_01] 8ì´ˆ í›„ ì¬ì—°ê²° ì‹œë„...
âœ… [emart_jeju_01] ì¬ì—°ê²° ì„±ê³µ
ğŸ“¤ [emart_jeju_01] BootNotification ì „ì†¡
âœ… [emart_jeju_01] CALLRESULT ìˆ˜ì‹ 
ğŸ’“ [emart_jeju_01] Heartbeat ì‹œì‘
```

---

## ğŸ” ì‹¤í–‰ & ëª¨ë‹ˆí„°ë§

### A. Python í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸ë¡œ ì‹¤í–‰ (ê¶Œì¥)

```bash
# í„°ë¯¸ë„ 1: Python ì„œë²„
cd C:\Project\OCPP201(P2M)
python ocpp_server.py
# ì¶œë ¥:
# ğŸŒ OCPP 2.0.1 ì„œë²„ ì‹œì‘: ws://localhost:9000
# ğŸ“Š REST API ì„œë²„: http://localhost:8080

# í„°ë¯¸ë„ 2: í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸
python test_csharp_integration.py
# ë˜ëŠ” íŠ¹ì • ì‹œë‚˜ë¦¬ì˜¤ë§Œ
python test_csharp_integration.py 1  # ì‹œë‚˜ë¦¬ì˜¤ 1
python test_csharp_integration.py 2  # ì‹œë‚˜ë¦¬ì˜¤ 2
python test_csharp_integration.py 3  # ì‹œë‚˜ë¦¬ì˜¤ 3
```

### B. ë°°ì¹˜ ë©”ë‰´ë¡œ ì‹¤í–‰

```bash
cd C:\Project\OCPP201(P2M)
run_tests.bat

# ë©”ë‰´ ì„ íƒ:
# 1. ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ ì—°ê²° í…ŒìŠ¤íŠ¸
# 2. ì‹œë‚˜ë¦¬ì˜¤ 2: ì¶©ì „ ì„¸ì…˜ í…ŒìŠ¤íŠ¸
# 3. ì‹œë‚˜ë¦¬ì˜¤ 3: ë‹¤ì¤‘ ì¶©ì „ê¸° í…ŒìŠ¤íŠ¸
# 4. C# ì‹œë®¬ë ˆì´í„° ì‹¤í–‰
# 5-7. Python í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸
# 8. ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ
```

### C. C# ì‹œë®¬ë ˆì´í„° ì§ì ‘ ì‹¤í–‰

```bash
# ë¹Œë“œ
dotnet build OCPP201ChargerSimulator.csproj -c Release

# ì‹¤í–‰
dotnet run --project OCPP201ChargerSimulator.csproj
```

---

## ğŸ“Š ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

### 1ï¸âƒ£ ì„œë²„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§

```bash
# Python ì„œë²„ ë¡œê·¸ (ì‹¤ì‹œê°„)
# ocpp_server.pyì˜ print ì¶œë ¥ì„ ê´€ì°°í•˜ë©´ì„œ:
# - ğŸ“¥ [charger_id] ë©”ì‹œì§€ ìˆ˜ì‹ 
# - ğŸ’¾ [charger_id] ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
# - âŒ [charger_id] ì˜¤ë¥˜ ë°œìƒ
```

### 2ï¸âƒ£ í¬íŠ¸ ëª¨ë‹ˆí„°ë§

```powershell
# í™œì„± WebSocket ì—°ê²° í™•ì¸
netstat -ano | findstr ":9000"

# ì˜ˆìƒ ì¶œë ¥:
# TCP    127.0.0.1:9000        LISTENING
# TCP    127.0.0.1:50000       ESTABLISHED
# TCP    127.0.0.1:50001       ESTABLISHED
```

### 3ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ì‹¤ì‹œê°„ ì¡°íšŒ

```sql
-- ë§¤ 10ì´ˆë§ˆë‹¤ ë‹¤ìŒì„ ì‹¤í–‰:

-- ìµœê·¼ ê±°ë˜
SELECT charger_id, energy_consumed, cost, start_time
FROM charger_usage_log
WHERE start_time > NOW() - INTERVAL '2 minutes'
ORDER BY start_time DESC
LIMIT 5;

-- í™œì„± ì¶©ì „ê¸°
SELECT charger_id, current_power, status, last_heartbeat
FROM charger_info
WHERE status = 'Online'
ORDER BY charger_id;
```

### 4ï¸âƒ£ GIS ëŒ€ì‹œë³´ë“œ ëª¨ë‹ˆí„°ë§

```bash
# ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°
http://localhost:8080/advanced_dashboard.html

# í™•ì¸ ì‚¬í•­:
# âœ… Emart 3ê°œ ìœ„ì¹˜ì˜ ì¶©ì „ê¸° í‘œì‹œ
# âœ… í™œì„± ì¶©ì „ê¸°ëŠ” ë…¹ìƒ‰, ì˜¤í”„ë¼ì¸ì€ íšŒìƒ‰
# âœ… ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ì‹¤ì‹œê°„ ìƒíƒœ í‘œì‹œ
# âœ… ì¶©ì „ê¸°ë³„ ì „ë ¥ í‘œì‹œ (kW)
```

---

## ğŸ§ª ìë™ ê²€ì¦

### ì‹¤í–‰

```bash
python verify_test_results.py
```

### ì¶œë ¥ ì˜ˆì‹œ

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  OCPP 2.0.1 í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê²€ì¦
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[ê²€ì¦] ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ ì—°ê²° ë° BootNotification
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… ì—°ê²° ì„±ê³µ: 5ê±´ì˜ ê±°ë˜ ê¸°ë¡ ë°œê²¬

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[ê²€ì¦] ì‹œë‚˜ë¦¬ì˜¤ 2: ì¶©ì „ ì„¸ì…˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… ê±°ë˜ ê¸°ë¡ ë°œê²¬:
   ì¶©ì „ê¸°: emart_jeju_01
   ê±°ë˜ID: TX-20240121-001
   ì—ë„ˆì§€: 1.67 kWh
   ìš”ê¸ˆ: â‚©250
   ì§€ì†ì‹œê°„: 30ì´ˆ
   ì‹œì‘ì‹œê°„: 2024-01-21 15:31:00

   ê²€ì¦ ê²°ê³¼:
   âœ… ì—ë„ˆì§€ > 0
   âœ… ìš”ê¸ˆ ê³„ì‚°ë¨
   âœ… ì§€ì†ì‹œê°„ 30ì´ˆ ì´ìƒ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[ê²€ì¦] ì‹œë‚˜ë¦¬ì˜¤ 3: ë‹¤ì¤‘ ì¶©ì „ê¸°
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… ë‹¤ì¤‘ ì¶©ì „ê¸° ê°ì§€:
   ì¶©ì „ê¸° ìˆ˜: 5ê°œ
   ê±°ë˜ ìˆ˜: 5ê±´
   ì´ ì—ë„ˆì§€: 3.92 kWh

   ì¶©ì „ê¸°ë³„ í†µê³„:
   â€¢ emart_jeju_01: 1ê±´, 0.83kWh
   â€¢ emart_jeju_02: 1ê±´, 0.83kWh
   â€¢ emart_jeju_03: 1ê±´, 0.83kWh
   â€¢ emart_shinjeju_01: 1ê±´, 0.42kWh
   â€¢ emart_shinjeju_02: 1ê±´, 0.42kWh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[ìµœê·¼ ê±°ë˜] ìµœê·¼ 30ë¶„
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ ì¶©ì „ê¸°              â”‚ ê±°ë˜ID         â”‚ ì—ë„ˆì§€(kWh)     â”‚ ìš”ê¸ˆ(â‚©)   â”‚ ì‹œê°„(ì´ˆ)  â”‚ ì‹œì‘ì‹œê°„       â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ emart_jeju_02       â”‚ TX-20240121-00 â”‚ 0.83            â”‚ 125       â”‚ 30        â”‚ 15:33:45       â”‚
â”‚ emart_jeju_01       â”‚ TX-20240121-00 â”‚ 0.83            â”‚ 125       â”‚ 30        â”‚ 15:33:40       â”‚
â”‚ emart_shinjeju_01   â”‚ TX-20240121-00 â”‚ 0.42            â”‚ 63        â”‚ 30        â”‚ 15:33:35       â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[ì¶©ì „ê¸°ë³„ í†µê³„] ìµœê·¼ 24ì‹œê°„
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ ì¶©ì „ê¸°              â”‚ ê±°ë˜ìˆ˜   â”‚ ì´ì—ë„ˆì§€(kWh)    â”‚ ì´ìš”ê¸ˆ(â‚©)     â”‚ í‰ê· ì‹œê°„(ì´ˆ)      â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ emart_jeju_01       â”‚ 12       â”‚ 10.04            â”‚ 1506          â”‚ 30                â”‚
â”‚ emart_jeju_02       â”‚ 11       â”‚ 9.13             â”‚ 1370          â”‚ 30                â”‚
â”‚ emart_jeju_03       â”‚ 10       â”‚ 8.33             â”‚ 1250          â”‚ 30                â”‚
â”‚ emart_shinjeju_01   â”‚ 8        â”‚ 3.36             â”‚ 504           â”‚ 30                â”‚
â”‚ emart_shinjeju_02   â”‚ 7        â”‚ 2.92             â”‚ 438           â”‚ 30                â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[ì‹œê°„ë³„ í†µê³„] ìµœê·¼ 24ì‹œê°„
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ ì‹œê°„                              â”‚ ê±°ë˜ìˆ˜   â”‚ ì´ì—ë„ˆì§€(kWh)    â”‚ ì´ìš”ê¸ˆ(â‚©)     â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ 2024-01-21 15:00                  â”‚ 5        â”‚ 4.18             â”‚ 627           â”‚
â”‚ 2024-01-21 14:00                  â”‚ 38       â”‚ 41.5             â”‚ 6225          â”‚
â”‚ 2024-01-21 13:00                  â”‚ 0        â”‚ 0                â”‚ 0             â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[ê²€ì¦ ìš”ì•½]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… PASS - scenario_1
âœ… PASS - scenario_2
âœ… PASS - scenario_3

ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ ê²€ì¦ ì™„ë£Œ!
```

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ: "Connection refused" ì—ëŸ¬

**ì›ì¸**: Python ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ ì•„ë‹˜

**í•´ê²°**:

```bash
# 1. ì„œë²„ ì‹¤í–‰ í™•ì¸
netstat -ano | findstr ":9000"

# 2. ì—†ìœ¼ë©´ ì‹œì‘
python ocpp_server.py

# 3. ë°©í™”ë²½ í™•ì¸
# Windows Defender ë°©í™”ë²½ â†’ Python.exeì— ëŒ€í•´ í¬íŠ¸ 9000 í—ˆìš©
```

### ë¬¸ì œ: "WebSocketException: Invalid frame"

**ì›ì¸**: OCPP ë©”ì‹œì§€ í˜•ì‹ ì˜¤ë¥˜

**í•´ê²°**:

```python
# JSON í˜•ì‹ ê²€ì¦
import json

message = [2, "msg-id", "BootNotification", {...}]
json_str = json.dumps(message)
print(json_str)  # í˜•ì‹ í™•ì¸

# ì„œë²„ ë¡œê·¸ì—ì„œ ë©”ì‹œì§€ ë¤í”„ í™•ì¸
# ocpp_server.pyì— ë‹¤ìŒ ì¶”ê°€:
print(f"ğŸ“¨ Raw message: {message}")
```

### ë¬¸ì œ: ë°ì´í„°ë² ì´ìŠ¤ ê¸°ë¡ ì—†ìŒ

**ì›ì¸**: charger_usage_log í…Œì´ë¸”ì— INSERT ì‹¤íŒ¨

**í•´ê²°**:

```sql
-- 1. í…Œì´ë¸” ì¡´ì¬ í™•ì¸
SELECT COUNT(*) FROM information_schema.tables 
WHERE table_name = 'charger_usage_log';

-- 2. ê¶Œí•œ í™•ì¸
GRANT ALL ON charger_db.* TO 'charger_user'@'localhost';

-- 3. ë°ì´í„° ì§ì ‘ ì‚½ì… í…ŒìŠ¤íŠ¸
INSERT INTO charger_usage_log (
    charger_id, transaction_id, energy_consumed, cost, duration_seconds
) VALUES (
    'test_charger', 'TX-TEST-001', 1.5, 225, 30
);

SELECT * FROM charger_usage_log WHERE charger_id = 'test_charger';
```

### ë¬¸ì œ: C# ì»´íŒŒì¼ ì˜¤ë¥˜

**ì›ì¸**: WebSocketSharp íŒ¨í‚¤ì§€ ë¯¸ì„¤ì¹˜

**í•´ê²°**:

```bash
# íŒ¨í‚¤ì§€ ì„¤ì¹˜
dotnet add package WebSocketSharp

# ë˜ëŠ” ìˆ˜ë™ ì„¤ì¹˜
cd OCPP201ChargerSimulator
dotnet restore
```

---

## ğŸ“ˆ ì„±ëŠ¥ ê¸°ì¤€

### ì„±ê³µ ê¸°ì¤€ (Pass Criteria)

| í•­ëª© | ê¸°ì¤€ | ì¸¡ì • ë°©ë²• |
|------|------|---------|
| **ì—°ê²°ì„±** | ëª¨ë“  ì¶©ì „ê¸° ì—°ê²° ì„±ê³µ | ë¡œê·¸ ë©”ì‹œì§€ ê°œìˆ˜ |
| **ì •í™•ì„±** | ì—ë„ˆì§€ Â±5% | DB ê°’ ë¹„êµ |
| **ì‘ë‹µì„±** | ë©”ì‹œì§€ ì²˜ë¦¬ <100ms | íƒ€ì„ìŠ¤íƒ¬í”„ ì°¨ì´ |
| **ì•ˆì •ì„±** | ë©”ì‹œì§€ ì†ì‹¤ 0% | TX ID ì—°ì†ì„± í™•ì¸ |
| **í™•ì¥ì„±** | 5ê°œ ì´ìƒ ë™ì‹œ ì—°ê²° | netstat í™•ì¸ |

### ì„±ëŠ¥ ìµœì í™”

```python
# Python ì„œë²„ ìµœì í™”
# ocpp_server.py ìˆ˜ì •:

# 1. ë¹„ë™ê¸° ì²˜ë¦¬ ìµœì í™”
asyncio.set_event_loop_policy(asyncio.WindowsSelectorEventLoopPolicy())

# 2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€
from sqlalchemy.pool import QueuePool
engine = create_engine(
    'postgresql://...',
    poolclass=QueuePool,
    pool_size=20,
    max_overflow=40
)

# 3. ë©”ì‹œì§€ ë°°ì¹˜ ì²˜ë¦¬
batch_size = 100
messages_buffer = []
```

---

## ğŸ¯ ì²´í¬ë¦¬ìŠ¤íŠ¸

í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ í™•ì¸ì‚¬í•­:

- [ ] Python 3.8+ ì„¤ì¹˜
- [ ] .NET 6.0 SDK ì„¤ì¹˜
- [ ] PostgreSQL ì‹¤í–‰ ì¤‘ (charger_db)
- [ ] Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ë¨
  ```
  websockets, psycopg2-binary, tabulate
  ```
- [ ] í¬íŠ¸ í™•ì¸ (9000, 8080)
- [ ] ë°©í™”ë²½ ì„¤ì • (Python, dotnet)

í…ŒìŠ¤íŠ¸ ì‹¤í–‰:

- [ ] ì‹œë‚˜ë¦¬ì˜¤ 1 (5ì´ˆ) ì™„ë£Œ
- [ ] ì‹œë‚˜ë¦¬ì˜¤ 2 (30ì´ˆ) ì™„ë£Œ
- [ ] ì‹œë‚˜ë¦¬ì˜¤ 3 (45ì´ˆ) ì™„ë£Œ
- [ ] ì‹œë‚˜ë¦¬ì˜¤ 4 (45ì´ˆ) ì™„ë£Œ
- [ ] ì‹œë‚˜ë¦¬ì˜¤ 5 (30ì´ˆ) ì™„ë£Œ

ê²€ì¦:

- [ ] ë°ì´í„°ë² ì´ìŠ¤ ê±°ë˜ ê¸°ë¡ í™•ì¸
- [ ] ì—ë„ˆì§€/ë¹„ìš© ê³„ì‚° ì •í™•ì„± í™•ì¸
- [ ] GIS ëŒ€ì‹œë³´ë“œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] ë¡œê·¸ íŒŒì¼ ì˜¤ë¥˜ ì—†ìŒ í™•ì¸
- [ ] ì„±ëŠ¥ ê¸°ì¤€ ì¶©ì¡± í™•ì¸

---

## ğŸ“ ê¸°ìˆ  ì§€ì›

### íŒŒì¼ ìœ„ì¹˜

| íŒŒì¼ | ìœ„ì¹˜ | ìš©ë„ |
|------|------|------|
| C# ì‹œë®¬ë ˆì´í„° | `OCPP201ChargerSimulator.cs` | ì¶©ì „ê¸° ë™ì‘ ì‹œë®¬ë ˆì´ì…˜ |
| Python í´ë¼ì´ì–¸íŠ¸ | `test_csharp_integration.py` | í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ |
| ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ | `verify_test_results.py` | ê²°ê³¼ ê²€ì¦ ë° ë¦¬í¬íŒ… |
| ë°°ì¹˜ ë©”ë‰´ | `run_tests.bat` | í†µí•© í…ŒìŠ¤íŠ¸ ë©”ë‰´ |
| Python ì„œë²„ | `ocpp_server.py` | OCPP ë©”ì‹œì§€ ì²˜ë¦¬ |

### ë¬¸ì˜ ì‚¬í•­

- OCPP 2.0.1 í”„ë¡œí† ì½œ: [OCPP Specification](https://www.openchargealliance.org/)
- PostgreSQL: [Documentation](https://www.postgresql.org/docs/)
- .NET: [Microsoft Docs](https://learn.microsoft.com/en-us/dotnet/)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024ë…„ 1ì›” 21ì¼  
**ë²„ì „**: 1.0  
**ìƒíƒœ**: âœ… í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ
